{
    "version": "https://jsonfeed.org/version/1",
    "title": "Mr. zombie",
    "subtitle": "",
    "icon": "https://blog.tangbojin.cn/assets/favicon.ico",
    "description": "",
    "home_page_url": "https://blog.tangbojin.cn",
    "items": [
        {
            "id": "https://blog.tangbojin.cn/2024/06/21/cloudflare%E8%8A%82%E7%82%B9%E6%B5%8B%E9%80%9F%E7%BD%91%E5%9D%80/",
            "url": "https://blog.tangbojin.cn/2024/06/21/cloudflare%E8%8A%82%E7%82%B9%E6%B5%8B%E9%80%9F%E7%BD%91%E5%9D%80/",
            "title": "cloudflare节点测速网址",
            "date_published": "2024-06-21T06:52:43.000Z",
            "content_html": "<h3 id=\"节点测速网址\"><a class=\"anchor\" href=\"#节点测速网址\">#</a> 节点测速网址</h3>\n<h3 id=\"cloudflare官方\"><a class=\"anchor\" href=\"#cloudflare官方\">#</a> cloudflare 官方</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">></span>  Cloudflare 10M测速地址：https://speed.cloudflare.com/__down?bytes<span class=\"token operator\">=</span><span class=\"token number\">10000000</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">></span>  Cloudflare 50M测速地址：https://speed.cloudflare.com/__down?bytes<span class=\"token operator\">=</span><span class=\"token number\">50000000</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">></span>  Cloudflare 100M测速地址：https://speed.cloudflare.com/__down?bytes<span class=\"token operator\">=</span><span class=\"token number\">100000000</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">></span>  Cloudflare 200M测速地址：https://speed.cloudflare.com/__down?bytes<span class=\"token operator\">=</span><span class=\"token number\">200000000</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">></span>  Cloudflare：http://cp.cloudflare.com/generate_204</pre></td></tr></table></figure><h3 id=\"cachefly\"><a class=\"anchor\" href=\"#cachefly\">#</a> Cachefly</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">></span>  http://cachefly.cachefly.net/50mb.test</pre></td></tr></table></figure><h3 id=\"google\"><a class=\"anchor\" href=\"#google\">#</a> Google</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Google Chrome浏览器用来检测网络连通性的URL，也是 Shadowrocket 配置中默认的</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">></span>  http://www.gstatic.com/generate_204</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Google Map</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">></span>  http://maps.googleapis.com/maps/api/mapsjs/gen_204</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>Google Chrome浏览器的另一个检测网络连通性的URL</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">></span>  http://www.google.com/generate_204</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Google Analytics 分析</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">></span>  http://www.google-analytics.com/generate_204</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>Google Chrome浏览器的另一个检测网络连通性的URL</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">></span>  http://connectivitycheck.gstatic.com/generate_204</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>另一个Google用于检测网络连通性的URL</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">></span>  https://clients3.google.com/generate_204</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>Google的一个空白页面，访问会返回204</pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token operator\">></span>  http://www.google.com/blank.html</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>Gmail使用的一个空白图片URL，访问会返回204</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token operator\">></span>  https://ssl.gstatic.com/ui/v1/icons/mail/images/cleardot.gif</pre></td></tr></table></figure><h3 id=\"其他\"><a class=\"anchor\" href=\"#其他\">#</a> 其他</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>//Apple</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>苹果设备用来检测热点门户的URL，正常访问会返回204</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">></span>  http://captive.apple.com</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>苹果设备检测网络的另一个URL</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">></span>  http://www.apple.com/library/test/success.html</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>//微软//</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Microsoft 用来检测Internet连接的URL，访问会返回204</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">></span>  http://www.msftncsi.com/ncsi.txt</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>Microsoft 另一个用来检测Internet连接的URL，访问会返回204</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">></span>  http://www.msftconnecttest.com/connecttest.txt</pre></td></tr><tr><td data-num=\"11\"></td><td><pre>微软 Bing 搜索引擎用于追踪用户的URL，访问会返回204</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">></span>  https://bat.bing.com/action/0</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>//Facebook</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>Facebook 用于追踪用户来源的URL，访问会返回204</pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token operator\">></span>  https://www.facebook.com/common/referer_frame.php</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>//Firefox</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>火狐浏览器用来检测网络连通性的URL</pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token operator\">></span>  http://detectportal.firefox.com/success.txt</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>//Twitter</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>Twitter 的 favicon 图标URL，访问会返回204</pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token operator\">></span>  https://twitter.com/favicon.ico</pre></td></tr><tr><td data-num=\"22\"></td><td><pre>//其他</pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token operator\">></span>  http://www.v2ex.com/generate_204</pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token operator\">></span>  https://http.cat/204</pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token operator\">></span>  https://httpbin.org/status/204</pre></td></tr></table></figure>",
            "tags": [
                "cloudflare",
                "科学上网"
            ]
        },
        {
            "id": "https://blog.tangbojin.cn/2024/06/21/%E5%85%8D%E8%B4%B9%E6%89%98%E7%AE%A1%E5%9F%9F%E5%90%8D%E7%BD%91%E7%AB%99/",
            "url": "https://blog.tangbojin.cn/2024/06/21/%E5%85%8D%E8%B4%B9%E6%89%98%E7%AE%A1%E5%9F%9F%E5%90%8D%E7%BD%91%E7%AB%99/",
            "title": "DNS、域名相关",
            "date_published": "2024-06-21T06:52:43.000Z",
            "content_html": "<p><a href=\"https://dns.he.net/\">https://dns.he.net/</a><br />\n<a href=\"https://hostry.com/\">https://hostry.com/</a><br />\n<a href=\"https://dynv6.com/\">https://dynv6.com/</a></p>\n",
            "tags": [
                "域名",
                "DNS"
            ]
        },
        {
            "id": "https://blog.tangbojin.cn/2024/06/19/hello-world/",
            "url": "https://blog.tangbojin.cn/2024/06/19/hello-world/",
            "title": "Hello World",
            "date_published": "2024-06-19T08:23:20.119Z",
            "content_html": "<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"quick-start\"><a class=\"anchor\" href=\"#quick-start\">#</a> Quick Start</h2>\n<h3 id=\"create-a-new-post\"><a class=\"anchor\" href=\"#create-a-new-post\">#</a> Create a new post</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo new <span class=\"token string\">\"My New Post\"</span></pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"run-server\"><a class=\"anchor\" href=\"#run-server\">#</a> Run server</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo server</pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"generate-static-files\"><a class=\"anchor\" href=\"#generate-static-files\">#</a> Generate static files</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo generate</pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"deploy-to-remote-sites\"><a class=\"anchor\" href=\"#deploy-to-remote-sites\">#</a> Deploy to remote sites</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ hexo deploy</pre></td></tr></table></figure><p>More info: <a href=\"https://hexo.io/docs/one-command-deployment.html\">Deployment</a></p>\n",
            "tags": []
        },
        {
            "id": "https://blog.tangbojin.cn/2024/06/12/hexo%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7/",
            "url": "https://blog.tangbojin.cn/2024/06/12/hexo%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7/",
            "title": "hexo版本升级",
            "date_published": "2024-06-12T06:52:43.000Z",
            "content_html": "<h3 id=\"使用npm指令对hexo进行升级\"><a class=\"anchor\" href=\"#使用npm指令对hexo进行升级\">#</a> 使用 npm 指令对 hexo 进行升级</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>//以下指令均在Hexo目录下操作，先定位到Hexo目录</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>//查看当前版本，判断是否需要升级</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">></span> hexo version</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>//全局升级hexo-cli</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>$ <span class=\"token function\">npm</span> i hexo-cli <span class=\"token parameter variable\">-g</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>//再次查看版本，看hexo-cli是否升级成功</pre></td></tr><tr><td data-num=\"9\"></td><td><pre>$ hexo version</pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>//安装npm-check，若已安装可以跳过</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> npm-check</pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>//检查系统插件是否需要升级</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>$ npm-check</pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>//安装npm-upgrade，若已安装可以跳过</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-g</span> npm-upgrade</pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>//更新package.json</pre></td></tr><tr><td data-num=\"21\"></td><td><pre>$ npm-upgrade</pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>//更新全局插件</pre></td></tr><tr><td data-num=\"24\"></td><td><pre>$ <span class=\"token function\">npm</span> update <span class=\"token parameter variable\">-g</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>//更新系统插件</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>$ <span class=\"token function\">npm</span> update <span class=\"token parameter variable\">--save</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>//再次查看版本，判断是否升级成功</pre></td></tr><tr><td data-num=\"30\"></td><td><pre>$ hexo version</pre></td></tr></table></figure><p>也可以用可以用 ncu -u 一把梭</p>\n<h3 id=\"如果有问题就删除重来\"><a class=\"anchor\" href=\"#如果有问题就删除重来\">#</a> 如果有问题就删除重来</h3>\n<figure class=\"highlight bash\"><figcaption data-lang=\"bash\"><span>h</span></figcaption><table><tr><td data-num=\"1\"></td><td><pre>$ <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-fr</span> node_modules/</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>$ <span class=\"token function\">npm</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">--save</span></pre></td></tr></table></figure>",
            "tags": [
                "hexo"
            ]
        },
        {
            "id": "https://blog.tangbojin.cn/2024/06/11/Markdown%E7%AE%80%E6%98%8E%E8%AF%AD%E6%B3%95%E6%95%99%E7%A8%8B/",
            "url": "https://blog.tangbojin.cn/2024/06/11/Markdown%E7%AE%80%E6%98%8E%E8%AF%AD%E6%B3%95%E6%95%99%E7%A8%8B/",
            "title": "Markdown简明语法教程",
            "date_published": "2024-06-11T08:29:21.000Z",
            "content_html": "<h1 id=\"markdown简明语法教程\"><a class=\"anchor\" href=\"#markdown简明语法教程\">#</a> Markdown 简明语法教程</h1>\n<p><strong>说明：</strong></p>\n<ul>\n<li>本教程基于 Markdown 语言编写，项目地址位于<a href=\"https://github.com/Melo618/Simple-Markdown-Guide\"> Simple-Markdown-Guide</a>。</li>\n<li>本教程定位为基础教程，更加详细的用法可参考其他资料。</li>\n<li>本教程中代码块内的代码为 Markdown 的语法。</li>\n<li>本教程中部分语法使用的是<a href=\"https://help.github.com/articles/github-flavored-markdown/\"> GitHub Flavored Markdown</a>，GFM 语法与标准语法在不同环境中存在解析差异，本教程在使用时会加以说明。</li>\n<li>推荐使用 Haroopad (Win)、MarkdownPad (Win) 和 Mou (OS X) 编辑器，部分编辑器中文效果欠佳，可通过自定义 CSS 字体解决。</li>\n</ul>\n<h2 id=\"基本\"><a class=\"anchor\" href=\"#基本\">#</a> 基本</h2>\n<ul>\n<li>Markdown 是一种用来写作的轻量级标记语言。</li>\n<li>用标记语法，来代替常见的排版格式。</li>\n<li>兼容 HTML 代码。</li>\n<li>特殊字符自动转换，例如 <code>&lt;</code>  和 <code>&amp;</code> 。</li>\n</ul>\n<h2 id=\"字体\"><a class=\"anchor\" href=\"#字体\">#</a> 字体</h2>\n<ul>\n<li>\n<p>使用星号 <code>*</code>  和底号 <code>_</code> 表示 <code>&lt;em&gt;</code>  标签。</p>\n<p>例如：</p>\n<pre><code>*斜体*\n_斜体_\n</code></pre>\n<p>效果：</p>\n<p><em>斜体</em></p>\n</li>\n<li>\n<p>使用双星号 <code>**</code>  和双底号 <code>__</code> 表示 <code>&lt;strong&gt;</code>  标签。</p>\n<p>例如：</p>\n<pre><code>**强调**\n__强调__\n</code></pre>\n<p>效果：</p>\n<p><strong>强调</strong></p>\n</li>\n</ul>\n<h2 id=\"换行\"><a class=\"anchor\" href=\"#换行\">#</a> 换行</h2>\n<ul>\n<li>单一段落用空白行。</li>\n</ul>\n<h2 id=\"标题\"><a class=\"anchor\" href=\"#标题\">#</a> 标题</h2>\n<ul>\n<li>\n<p>生成 <code>&lt;h1&gt;</code> - <code>&lt;h6&gt;</code>  标签，是通过在文字前面加上同等个数 <code>#</code> 符号来实现。</p>\n</li>\n<li>\n<p>出于美观，也可以使用对称的闭合式标题符号。</p>\n<p>例如：</p>\n<pre><code>### 这是标题\n### 这是标题 ###\n</code></pre>\n<p>效果：</p>\n<h3 id=\"这是标题\"><a class=\"anchor\" href=\"#这是标题\">#</a> 这是标题</h3>\n</li>\n</ul>\n<h2 id=\"列表\"><a class=\"anchor\" href=\"#列表\">#</a> 列表</h2>\n<ul>\n<li>\n<p><code>*</code> ， <code>-</code> ， <code>+</code>  这三个符号效果都一样，这 3 个符号被称为 Markdown 列表符号。而有序列表则使用数字接着一个英文句点（数字大小并不会影响输出序列）。</p>\n<p>例如：</p>\n<pre><code>* 第一行\n* 第二行\n* 第三行\n6. 第四行\n5. 第五行\n4. 第六行\n</code></pre>\n<p>效果：</p>\n<ul>\n<li>第一行</li>\n<li>第二行</li>\n<li>第三行</li>\n</ul>\n<ol start=\"6\">\n<li>第四行</li>\n<li>第五行</li>\n<li>第六行</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"引用\"><a class=\"anchor\" href=\"#引用\">#</a> 引用</h2>\n<ul>\n<li>\n<p><code>&gt;</code>  符号表示引用，可简写于第一行，也可以每一行都添加。</p>\n</li>\n<li>\n<p>区块的引用可以嵌套，只需要在层次数上加上同等数量的 <code>&gt;</code>  符号。</p>\n</li>\n<li>\n<p>引用内可以使用其他 Markdown 语法，包括标题、列表、代码区块等。</p>\n<p>例如：</p>\n<pre><code>&gt;    引用\n&gt;    &gt;    引用中的引用\n</code></pre>\n<p>效果：</p>\n<blockquote>\n<p>引用</p>\n<blockquote>\n<p>引用中的引用</p>\n</blockquote>\n</blockquote>\n</li>\n</ul>\n<h2 id=\"代码区块\"><a class=\"anchor\" href=\"#代码区块\">#</a> 代码区块</h2>\n<ul>\n<li>\n<p>&lt;code&gt;`&lt;/code &gt; 是表示 inline 代码，4 个 &lt; code&gt; &lt;/code&gt;（空格）来表示缩进式代码段，分别对应 HTML 的 <code>&lt;code&gt;</code> ， <code>&lt;pre&gt;</code>  标签。也可以使用 &lt;code&gt;```&lt;/code &gt; 来表达围栏式代码块（<strong>GFM 语法</strong>，部分编辑器不支持），并指定他的语言类型，实现语法高亮。围栏式代码块可以大量减少缩进的使用，大规模的代码块使用非常方便。</p>\n<p>例如：</p>\n<pre><code>`sort()` 函数按升序对给定数组的值排序。\n</code></pre>\n<p>普通的缩进式代码块。</p>\n<pre><code>    &lt;?php\n        $my_array = array('a' =&gt; 'Dog', 'b' =&gt; 'Cat');\n        sort($my_array);\n        print_r($my_array);\n    ?&gt;\n</code></pre>\n<p>带语法高亮的围栏式代码块（<strong>GFM 语法</strong>，部分编辑器不支持）。</p>\n<pre><code>```php\n&lt;?php\n    $my_array = array('a' =&gt; 'Dog', 'b' =&gt; 'Cat');\n    sort($my_array);\n    print_r($my_array);\n?&gt;\n```\n</code></pre>\n<p>效果：</p>\n<p><code>sort()</code>  函数按升序对给定数组的值排序。</p>\n<p>普通的缩进式代码块。</p>\n<pre><code>&lt;?php\n    $my_array = array('a' =&gt; 'Dog', 'b' =&gt; 'Cat');\n    sort($my_array);\n    print_r($my_array);\n?&gt;\n</code></pre>\n<p>带语法高亮的围栏式代码块（<strong>GFM 语法</strong>，部分编辑器不支持）。</p>\n<figure class=\"highlight php\"><figcaption data-lang=\"PHP\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token variable\">$my_array</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'a'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Dog'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'b'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'Cat'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function\">sort</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$my_array</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token function\">print_r</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$my_array</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token delimiter important\">?></span></span></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"链接\"><a class=\"anchor\" href=\"#链接\">#</a> 链接</h2>\n<ul>\n<li>\n<p>Markdown 支持两种形式的链接语法：行内式和参考式两种形式。</p>\n<p>行内式链接，是在方括号后面接圆括号即可。<br />\n例如：</p>\n<pre><code>[Google](https://www.google.com &quot;Google&quot;)\n</code></pre>\n<p>效果：</p>\n<p><a href=\"https://www.google.com\" title=\"Google\">Google</a></p>\n<p>参考式链接，是在链接文字的括号后面加上另一个方括号，在第二个方括号里面要填入用以辨识链接的标记。<br />\n例如：</p>\n<pre><code>[Google][GOOGL]\n</code></pre>\n</li>\n</ul>\n<pre><code>效果：\n\n[Google][GOOGL]\n\n[GOOGL]: https://www.google.com &quot;Google&quot;\n\n## 图片\n\n* Markdown使用一种和链接很相似的语法来标记图片，只是多了一个`!`在最前面，同样也允许两种样式：行内式和参考式。\n* 目前为止，Markdown还没有办法指定图片的宽高，如果你需要的话，你可以使用普通的`&lt;img&gt;`标签。\n\n行内式链接，是在方括号后面接圆括号即可。\n例如：\n</code></pre>\n<p><img loading=\"lazy\" data-src=\"https://www.wikipedia.org/portal/wikipedia.org/assets/img/Wikipedia-logo-v2.png\" alt=\"Wikipedia\" title=\"Wikipedia\" /></p>\n<pre><code>效果：\n\n![Wikipedia](https://www.wikipedia.org/portal/wikipedia.org/assets/img/Wikipedia-logo-v2.png &quot;Wikipedia&quot;)\n\n## 分隔线\n\n* 使用三个以上的`*`、`-`来建立一个分隔线，行内不能有其他字符。\n\n例如：\n</code></pre>\n<hr />\n<hr />\n<hr />\n<hr />\n<pre><code>效果：\n\n上文\n- - -\n下文\n\n## 表格\n\n* Markdown使用`|`和`-`来绘制表格，`:`可控制左对齐、右对齐及居中。\n\n例如：\n</code></pre>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:left\">Title</th>\n<th style=\"text-align:center\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:left\">Version</td>\n<td style=\"text-align:center\">0.0.1</td>\n</tr>\n<tr>\n<td style=\"text-align:left\">Editor</td>\n<td style=\"text-align:center\"><a href=\"mailto:Editor@Email.com\">Melo618</a></td>\n</tr>\n</tbody>\n</table>\n<pre><code>效果：\n\n| Title   | Description                        |\n| :------ | :--------------------------------: |\n| Version | 0.0.1                              |\n| Editor  | [Melo618](mailto:Editor@Email.com) |\n\n## 特殊符号\n\n* Markdown利用`\\`字符来转义一些在语法中有特殊意义的符号。\n\n## 推荐阅读\n\n* [Markdown语法说明（简体中文版）](http://wowubuntu.com/markdown/index.html)\n* [Markdown Syntax Documentation](http://daringfireball.net/projects/markdown/syntax)\n* [GitHub Flavored Markdown](https://help.github.com/articles/github-flavored-markdown)\n\n## License\n\nCopyright © 2014-2018, Melo Chan. [MIT License](http://opensource.org/licenses/MIT).\n</code></pre>\n",
            "tags": [
                "MarkDown"
            ]
        },
        {
            "id": "https://blog.tangbojin.cn/2024/06/10/SpringBoot%20%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8Log4j2%E8%AF%A6%E7%BB%86%EF%BC%88%E9%81%BF%E5%9D%91%EF%BC%89/",
            "url": "https://blog.tangbojin.cn/2024/06/10/SpringBoot%20%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BD%BF%E7%94%A8Log4j2%E8%AF%A6%E7%BB%86%EF%BC%88%E9%81%BF%E5%9D%91%EF%BC%89/",
            "title": "SpringBoot 项目中使用Log4j2",
            "date_published": "2024-06-10T09:33:41.000Z",
            "content_html": "<h1 id=\"springboot-项目中使用log4j2详细避坑\"><a class=\"anchor\" href=\"#springboot-项目中使用log4j2详细避坑\">#</a> SpringBoot 项目中使用 Log4j2 详细（避坑）</h1>\n<p>以下部分内容转载整理自 <a href=\"https://blog.csdn.net/vbirdbest/article/details/71751835\" title=\"log4j2 实际使用详解_vbirdbest的博客-CSDN博客_log4j2\">log4j2 实际使用详解_vbirdbest 的博客 - CSDN 博客_log4j2</a> ，感谢 <a href=\"https://blog.csdn.net/vbirdbest\" title=\"vbirdbest\">vbirdbest</a> 的相关知识分享</p>\n<h3 id=\"首先认识一下三胞胎\"><a class=\"anchor\" href=\"#首先认识一下三胞胎\">#</a> 首先，认识一下三胞胎</h3>\n<ul>\n<li>log4j 是 apache 实现的一个开源日志组件</li>\n<li>logback 同样是由 log4j 的作者设计完成的，拥有更好的特性，用来取代 log4j 的一个日志框架，是 slf4j 的原生实现</li>\n<li>Log4j2 是 log4j 1.x 和 logback 的改进版，据说采用了一些新技术（无锁异步、等等），使得日志的吞吐量、性能比 log4j 1.x 提高 10 倍，并解决了一些死锁的 bug，而且配置更加简单灵活</li>\n</ul>\n<h3 id=\"然后了解一下使用-slf4jlog4j-和直接用-log4j-的区别\"><a class=\"anchor\" href=\"#然后了解一下使用-slf4jlog4j-和直接用-log4j-的区别\">#</a> 然后，了解一下，使用 slf4j+log4j 和直接用 log4j 的区别</h3>\n<p>slf4j 是对所有日志框架制定的一种规范、标准、接口，并不是一个框架的具体的实现，因为接口并不能独立使用，需要和具体的日志框架实现配合使用（如 log4j、logback），使用接口的好处是当项目需要更换日志框架的时候，只需要更换 jar 和配置，不需要更改相关 java 代码</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestSlf4j</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token comment\">// Logger 和 LoggerFactory 导入的是 org.slf4j 包</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestSlf4j</span> <span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>log4j、logback、log4j2 都是一种日志具体实现框架，所以既可以单独使用也可以结合 slf4j 一起搭配使用</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>logging<span class=\"token punctuation\">.</span>log4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LogManager</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>logging<span class=\"token punctuation\">.</span>log4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestLog4j</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\">// Logger 和 LogManager 导入的是 org.apache.logging 包</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Logger</span> <span class=\"token constant\">LOG</span> <span class=\"token operator\">=</span> <span class=\"token class-name\">LogManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TestLog4j</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h2 id=\"一-导入需要使用的-jar-包slf4jlog4j2\"><a class=\"anchor\" href=\"#一-导入需要使用的-jar-包slf4jlog4j2\">#</a> 一、导入需要使用的 jar 包 (slf4j+log4j2)</h2>\n<p>springboot 项目中需导入</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>spring<span class=\"token operator\">-</span>boot<span class=\"token operator\">-</span>starter<span class=\"token operator\">-</span>log4j2<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">></span></pre></td></tr></table></figure><p>绕坑：如项目中有导入 spring-boot-starter-web 依赖包记得去掉 spring 自带的日志依赖 spring-boot-starter-logging，如下：</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>dependency<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>            <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>            <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>spring<span class=\"token operator\">-</span>boot<span class=\"token operator\">-</span>starter<span class=\"token operator\">-</span>web<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>            <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>exclusions<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>                <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>exclusion<span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>                    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>groupId<span class=\"token punctuation\">></span></span>org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>boot<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>groupId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>                    <span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>artifactId<span class=\"token punctuation\">></span></span>spring<span class=\"token operator\">-</span>boot<span class=\"token operator\">-</span>starter<span class=\"token operator\">-</span>logging<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>artifactId<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>                <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>exclusion<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>exclusions<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>dependency<span class=\"token operator\">></span></pre></td></tr></table></figure><h2 id=\"二-开始配置\"><a class=\"anchor\" href=\"#二-开始配置\">#</a> 二、开始配置</h2>\n<p>springboot 方式：</p>\n<p>application.properties 中添加配置 logging.config=classpath:log4j2_dev.xml， log4j2_dev.xml 是你创建的 log4j2 的配置文件名，放在 resources 下，如放在其他路径则对应修改</p>\n<p>Web 工程方式：</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">&lt;</span>context<span class=\"token operator\">-</span>param<span class=\"token operator\">></span>  </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token operator\">&lt;</span>param<span class=\"token operator\">-</span>name<span class=\"token operator\">></span>log4jConfiguration<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>param<span class=\"token operator\">-</span>name<span class=\"token operator\">></span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token operator\">&lt;</span>param<span class=\"token operator\">-</span>value<span class=\"token operator\">></span><span class=\"token operator\">/</span><span class=\"token constant\">WEB</span><span class=\"token operator\">-</span><span class=\"token constant\">INF</span><span class=\"token operator\">/</span>conf<span class=\"token operator\">/</span>log4j2<span class=\"token punctuation\">.</span>xml<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>param<span class=\"token operator\">-</span>value<span class=\"token operator\">></span>  </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>context<span class=\"token operator\">-</span>param<span class=\"token operator\">></span>  </pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span>listener<span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token operator\">&lt;</span>listener<span class=\"token operator\">-</span><span class=\"token keyword\">class</span><span class=\"token operator\">></span><span class=\"token class-name\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>apache<span class=\"token punctuation\">.</span>logging<span class=\"token punctuation\">.</span>log4j<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span></span>Log4jServletContextListener</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>listener<span class=\"token operator\">-</span><span class=\"token keyword\">class</span><span class=\"token operator\">></span>  </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>listener<span class=\"token operator\">></span></pre></td></tr></table></figure><p>纯 Java 方式：</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throws</span> <span class=\"token class-name\">IOException</span> <span class=\"token punctuation\">&#123;</span>  </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token class-name\">File</span> file <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">File</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"D:/log4j2.xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token class-name\">BufferedInputStream</span> in <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">BufferedInputStream</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">FileInputStream</span><span class=\"token punctuation\">(</span>file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token keyword\">final</span> <span class=\"token class-name\">ConfigurationSource</span> source <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ConfigurationSource</span><span class=\"token punctuation\">(</span>in<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token class-name\">Configurator</span><span class=\"token punctuation\">.</span><span class=\"token function\">initialize</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> source<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LogManager</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"myLogger\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  </pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>配置文件的格式：log2j 配置文件可以是 xml 格式的，也可以是 json 格式的，<br />\n配置文件的位置：log4j2 默认会在 classpath 目录下寻找 log4j2.xml、log4j.json、log4j.jsn 等名称的文件，如果都没有找到，则会按默认配置输出，也就是输出到控制台，也可以对配置文件自定义位置（需要在 web.xml 中配置），一般放置在 src/main/resources 根目录下即可</p>\n<p>贴上 log4j2_dev.properties 的配置再来讲解</p>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Configuration</span> <span class=\"token attr-name\">status</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>WARN<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>properties</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>LOG_HOME<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>D:/logs<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>FILE_NAME<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>mylog<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>property</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>log.sql.level<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>info<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>property</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>properties</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Appenders</span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Console</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Console<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">target</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>SYSTEM_OUT<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>PatternLayout</span> <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%d&#123;HH:mm:ss.SSS&#125; [%t] %-5level %l - %msg%n<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>  </pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Console</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>RollingRandomAccessFile</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>RollingRandomAccessFile<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">fileName</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;LOG_HOME&#125;/$&#123;FILE_NAME&#125;.log<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">filePattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;LOG_HOME&#125;/$$&#123;date:yyyy-MM&#125;/$&#123;FILE_NAME&#125;-%d&#123;yyyy-MM-dd HH-mm&#125;-%i.log<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>PatternLayout</span> <span class=\"token attr-name\">pattern</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>%d&#123;HH:mm:ss.SSS&#125; [%t] %-5level %l - %msg%n<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Policies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TimeBasedTriggeringPolicy</span> <span class=\"token attr-name\">interval</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>1<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SizeBasedTriggeringPolicy</span> <span class=\"token attr-name\">size</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>10 MB<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Policies</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>DefaultRolloverStrategy</span> <span class=\"token attr-name\">max</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>20<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>RollingRandomAccessFile</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Appenders</span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Loggers</span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Root</span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>AppenderRef</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Console<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>  </pre></td></tr><tr><td data-num=\"28\"></td><td><pre>            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>AppenderRef</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>RollingRandomAccessFile<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>  </pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Root</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Logger</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>com.mengdee.dao<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>$&#123;log.sql.level&#125;<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">additivity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>false<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>             <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>AppenderRef</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Console<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Logger</span><span class=\"token punctuation\">></span></span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Loggers</span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"35\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Configuration</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><p>log4j2.xml 文件的配置大致如下：</p>\n<ul>\n<li>\n<p>Configuration</p>\n<ul>\n<li>\n<p>properties</p>\n</li>\n<li>\n<p>Appenders</p>\n<ul>\n<li>\n<p>Console</p>\n<ul>\n<li>PatternLayout</li>\n</ul>\n</li>\n<li>\n<p>File</p>\n</li>\n<li>\n<p>RollingRandomAccessFile</p>\n</li>\n<li>\n<p>Async</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Loggers</p>\n<ul>\n<li>\n<p>Logger</p>\n</li>\n<li>\n<p>Root</p>\n<ul>\n<li>AppenderRef</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<hr />\n<ul>\n<li>\n<p>Configuration：为根节点，有 status 和 monitorInterval 等多个属性</p>\n<ul>\n<li>status 的值有 “trace”, “debug”, “info”, “warn”, “error” and “fatal”，用于控制 log4j2 日志框架本身的日志级别，如果将 stratus 设置为较低的级别就会看到很多关于 log4j2 本身的日志，如加载 log4j2 配置文件的路径等信息</li>\n<li>monitorInterval，含义是每隔多少秒重新读取配置文件，可以不重启应用的情况下修改配置</li>\n</ul>\n</li>\n<li>\n<p>Appenders：输出源，用于定义日志输出的地方<br />\n log4j2 支持的输出源有很多，有控制台 Console、文件 File、RollingRandomAccessFile、MongoDB、Flume 等</p>\n<ul>\n<li>\n<p>Console：控制台输出源是将日志打印到控制台上，开发的时候一般都会配置，以便调试</p>\n</li>\n<li>\n<p>File：文件输出源，用于将日志写入到指定的文件，需要配置输入到哪个位置（例如：D:/logs/mylog.log）</p>\n</li>\n<li>\n<p>RollingRandomAccessFile: 该输出源也是写入到文件，不同的是比 File 更加强大，可以指定当文件达到一定大小（如 20MB）时，另起一个文件继续写入日志，另起一个文件就涉及到新文件的名字命名规则，因此需要配置文件命名规则<br />\n这种方式更加实用，因为你不可能一直往一个文件中写，如果一直写，文件过大，打开就会卡死，也不便于查找日志。</p>\n<ul>\n<li>fileName 指定当前日志文件的位置和文件名称</li>\n<li>filePattern 指定当发生 Rolling 时，文件的转移和重命名规则</li>\n<li>SizeBasedTriggeringPolicy 指定当文件体积大于 size 指定的值时，触发 Rolling</li>\n<li>DefaultRolloverStrategy 指定最多保存的文件个数</li>\n<li>TimeBasedTriggeringPolicy 这个配置需要和 filePattern 结合使用，注意 filePattern 中配置的文件重命名规则是 ${FILE_NAME}-% d {yyyy-MM-dd HH-mm}-% i，最小的时间粒度是 mm，即分钟</li>\n<li>TimeBasedTriggeringPolicy 指定的 size 是 1，结合起来就是每 1 分钟生成一个新文件。如果改成 % d {yyyy-MM-dd HH}，最小粒度为小时，则每一个小时生成一个文件</li>\n</ul>\n</li>\n<li>\n<p>NoSql：MongoDb, 输出到 MongDb 数据库中</p>\n</li>\n<li>\n<p>Flume：输出到 Apache Flume（Flume 是 Cloudera 提供的一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统，Flume 支持在日志系统中定制各类数据发送方，用于收集数据；同时，Flume 提供对数据进行简单处理，并写到各种数据接受方（可定制）的能力。）</p>\n</li>\n<li>\n<p>Async：异步，需要通过 AppenderRef 来指定要对哪种输出源进行异步（一般用于配置 RollingRandomAccessFile）</p>\n</li>\n</ul>\n<p>PatternLayout：控制台或文件输出源（Console、File、RollingRandomAccessFile）都必须包含一个 PatternLayout 节点，用于指定输出文件的格式（如 日志输出的时间 文件 方法 行数 等格式），例如 pattern=”% d {HH:mm:ss.SSS} [% t] %-5level % logger {36} - % msg% n”</p>\n</li>\n</ul>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token operator\">%</span>d<span class=\"token punctuation\">&#123;</span><span class=\"token constant\">HH</span><span class=\"token operator\">:</span>mm<span class=\"token operator\">:</span>ss<span class=\"token punctuation\">.</span><span class=\"token constant\">SSS</span><span class=\"token punctuation\">&#125;</span> 表示输出到毫秒的时间</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token operator\">%</span>t 输出当前线程名称</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">%</span><span class=\"token operator\">-</span><span class=\"token number\">5l</span>evel 输出日志级别，<span class=\"token operator\">-</span><span class=\"token number\">5</span>表示左对齐并且固定输出<span class=\"token number\">5</span>个字符，如果不足在右边补<span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">%</span>logger 输出logger名称，因为<span class=\"token class-name\">Root</span> <span class=\"token class-name\">Logger</span>没有名称，所以没有输出</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">%</span>msg 日志文本</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token operator\">%</span>n 换行</pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>其他常用的占位符有：</pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token operator\">%</span><span class=\"token class-name\">F</span> 输出所在的类文件名，如<span class=\"token class-name\">Log4j2Test</span><span class=\"token punctuation\">.</span>java</pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token operator\">%</span><span class=\"token class-name\">L</span> 输出行号</pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token operator\">%</span><span class=\"token class-name\">M</span> 输出所在方法名</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">%</span>l 输出语句所在的行数<span class=\"token punctuation\">,</span> 包括类名、方法名、文件名、行数</pre></td></tr></table></figure><ul>\n<li>Loggers：日志器<br />\n日志器分根日志器 Root 和自定义日志器，当根据日志名字获取不到指定的日志器时就使用 Root 作为默认的日志器，自定义时需要指定每个 Logger 的名称 name（对于命名可以以包名作为日志的名字，不同的包配置不同的级别等），日志级别 level，相加性 additivity（是否继承下面配置的日志器）， 对于一般的日志器（如 Console、File、RollingRandomAccessFile）一般需要配置一个或多个输出源 AppenderRef；<br />\n每个 logger 可以指定一个 level（TRACE, DEBUG, INFO, WARN, ERROR, ALL or OFF），不指定时 level 默认为 ERROR<br />\nadditivity 指定是否同时输出 log 到父类的 appender，缺省为 true。</li>\n</ul>\n<figure class=\"highlight html\"><figcaption data-lang=\"HTML\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Logger</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>rollingRandomAccessFileLogger<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">level</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>trace<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">additivity</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>true<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>  </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>AppenderRef</span> <span class=\"token attr-name\">ref</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>RollingRandomAccessFile<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>  </pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Logger</span><span class=\"token punctuation\">></span></span></pre></td></tr></table></figure><ul>\n<li>properties: 属性<br />\n使用来定义常量，以便在其他配置的时候引用，该配置是可选的，例如定义日志的存放位置<br />\n D:/logs</li>\n</ul>\n<h2 id=\"三-验证日志内容\"><a class=\"anchor\" href=\"#三-验证日志内容\">#</a> 三、验证日志内容</h2>\n<p>以下为练习写的 excel 数据存入数据库的 controller 层代码，其中加入 Log4j2</p>\n<figure class=\"highlight java\"><figcaption data-lang=\"java\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">cn<span class=\"token punctuation\">.</span>tbj<span class=\"token punctuation\">.</span>service<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ExcelService</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Logger</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>slf4j<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">LoggerFactory</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>beans<span class=\"token punctuation\">.</span>factory<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Autowired</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">PostMapping</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestMapping</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RequestParam</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>bind<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">RestController</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>web<span class=\"token punctuation\">.</span>multipart<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">MultipartFile</span></span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token annotation punctuation\">@RestController</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token annotation punctuation\">@RequestMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/user\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">UserController</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">static</span> <span class=\"token class-name\">Logger</span> logger <span class=\"token operator\">=</span> <span class=\"token class-name\">LoggerFactory</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLogger</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">UserController</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token annotation punctuation\">@Autowired</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">private</span> <span class=\"token class-name\">ExcelService</span> excelService<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token annotation punctuation\">@PostMapping</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/import\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">public</span> <span class=\"token keyword\">boolean</span> <span class=\"token function\">addUser</span><span class=\"token punctuation\">(</span><span class=\"token annotation punctuation\">@RequestParam</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"file\"</span><span class=\"token punctuation\">)</span> <span class=\"token class-name\">MultipartFile</span> file<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        <span class=\"token keyword\">boolean</span> a <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token class-name\">String</span> filename <span class=\"token operator\">=</span> file<span class=\"token punctuation\">.</span><span class=\"token function\">getOriginalFilename</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"++++++++++++文件名++++++++\"</span><span class=\"token operator\">+</span>filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">trace</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"trace level\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">debug</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"debug level\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"info level\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">warn</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"warn level\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"error level\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>        <span class=\"token keyword\">long</span> beginTime <span class=\"token operator\">=</span> <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentTimeMillis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"请求处理结束，耗时：&#123;&#125;毫秒\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentTimeMillis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> beginTime<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// 第一种用法</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        logger<span class=\"token punctuation\">.</span><span class=\"token function\">info</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"请求处理结束，耗时：\"</span> <span class=\"token operator\">+</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span><span class=\"token function\">currentTimeMillis</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> beginTime<span class=\"token punctuation\">)</span>  <span class=\"token operator\">+</span> <span class=\"token string\">\"毫秒\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>    <span class=\"token comment\">// 第二种用法</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>            a <span class=\"token operator\">=</span> excelService<span class=\"token punctuation\">.</span><span class=\"token function\">batchImport</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>            e<span class=\"token punctuation\">.</span><span class=\"token function\">printStackTrace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>        <span class=\"token keyword\">return</span>  a <span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>尝试一些正常和错误的操作，以下为反馈的日志信息</p>\n<p>​<img loading=\"lazy\" data-src=\"https://img-blog.csdn.net/20180910155708429?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1J5YW5Eb24=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70\" alt=\"\" /></p>\n",
            "tags": [
                "Java",
                "SpringBoot",
                "Log4j2"
            ]
        }
    ]
}